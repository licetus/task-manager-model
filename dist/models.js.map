{"version":3,"sources":["webpack:///webpack/bootstrap 55752f532ee5ec7e1268","webpack:///./models/general/du.js","webpack:///./validator/index.js","webpack:///./errors/index.js","webpack:///./index.js","webpack:///../~/babel-polyfill/lib/index.js","webpack:///./db/connections.js","webpack:///./db/index.js","webpack:///./db/manager.js","webpack:///./models/document/document.js","webpack:///./models/document/documentHistory.js","webpack:///./models/document/documentTag.js","webpack:///./models/document/index.js","webpack:///./models/document/tag.js","webpack:///./models/general/index.js","webpack:///./models/index.js","webpack:///./utilities/index.js","webpack:///../~/babel-polyfill/~/regenerator-runtime/runtime.js","webpack:///./errors/locale.zh-cn.json","webpack:///../~/regenerator-runtime/runtime.js","webpack:///./db","webpack:///external \"core-js/fn/regexp/escape\"","webpack:///external \"core-js/shim\"","webpack:///external \"fs\"","webpack:///external \"joi\"","webpack:///external \"path\"","webpack:///external \"pg-then\"","webpack:///external \"restify-errors\""],"names":["ERRORS","InvalidId","DBCreateFailed","DBUpdateFailed","DBDeleteFailed","DBGetFailed","errors","register","DataModel","constructor","scheme","table","independentId","returnCreateTime","returnLastUpdateTime","pkey","props","isExist","query","result","db","rowCount","isExistByKey","key","value","copy","Object","assign","setPrototypeOf","getPrototypeOf","create","client","undefined","propNames","keys","map","prop","join","propNumbers","index","params","DBCreateFailedError","row","rows","update","propAssigns","filter","push","str","DBUpdateFailedError","get","obj","schema","DBGetFailedError","res","forEach","createTime","create_time","lastUpdateTime","last_update_time","getByKey","getList","values","paramsString","queryParams","data","getViewListCount","view","total","getListCount","getViewList","fields","name","filed","save","object","err","delete","InvalidIdError","DBDeleteFailedError","transaction","actions","ValidationFailed","statusCode","validate","ext","Joi","Array","isArray","required","r","concat","error","ValidationFailedError","details","getSchema","schemaKeys","sub","normalize","endsWith","localization","require","lang","message","slice","options","config","errorName","makeConstructor","Error","models","global","configure","hashSalt","secret","hash","database","connections","postgres","redis","init","type","arr","credentials","username","password","host","port","server","connection","string","default","user","typedConfig","length","args","call","arguments","hasOwnProperty","pgAsPromised","Client","apply","end","pg","defaults","parseInt8","DbManager","version","dropDbIfExists","dbname","queryTerminate","queryDrop","createDbIfNotExists","queryCheck","queryCreate","getCurrentVersion","resultCheck","queryGetVersion","resultVersion","currentVer","ver","getPatchFolders","patchMainPath","path","__dirname","clusters","fs","readdirSync","patchFolders","c","charAt","folders","f","Number","parseFloat","sort","a","b","updateVersion","patchVer","patchFolder","patchPath","files","includes","updatorPath","updator","putPatch","readFileSync","rebuild","Document","id","url","thumbUrl","category","content","size","T","number","integer","allow","min","max","Type","Unknown","Image","Pdf","Audio","DocumentHistory","documentId","DocumentTag","tagId","Tag","description","iterateKeysObj","keyFunc","reduce","newArray","item","newObj","newKey","iterateKeys","getTime","tick","Date","getEpochTime","date","setHours","getAddedMonthTime","timestamp","addedMonth","originDate","month","getMonth","setMonth","underlineCase2camelCase","toUpperCase","i","camelCase2underlineCase","toLowerCase","generateListParamsSqlString","primaryName","isSum","primary","orderBy","limit","filters","page","pageSize","next","strings","split","substr","filterString","ret","checkObject","p","should","equal"],"mappings":"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,IAAR,CAAa,OAAb,CAAsB,EAApD,GAAwD,EAA7E;AACA,OAAMwN,MAAO,IAAGD,YAAa,IAAGT,OAAQ,IAAGC,KAAM,EAAjD;AACA;AACA,QAAOS,GAAP;AACA,CArCM;;AAuCA,MAAMC,oCAAc,CAACnL,MAAD,EAASV,IAAT,KAAkB;AAC5CvC,QAAOQ,IAAP,CAAY+B,IAAZ,EAAkBV,OAAlB,CAA0BwM,KAAK;AAC9B,MAAIA,MAAM,IAAN,IAAc9L,KAAK8L,CAAL,MAAY/N,SAA1B,IAAuCiC,KAAK8L,CAAL,MAAY,IAAvD,EAA6DpL,OAAOoL,CAAP,EAAUC,MAAV,CAAiBC,KAAjB,CAAuBhM,KAAK8L,CAAL,CAAvB;AAC7D,EAFD;AAGA,CAJM,C;;;;;;ACnHP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;;AAEA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,cAAc;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,kBAAkB;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC/tBA,kBAAkB,iS;;;;;;ACAlB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;;AAEA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,kBAAkB;AACnD;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC3pBA;AACA;AACA;AACA,uCAAuC,WAAW;AAClD;AACA;AACA,4B;;;;;;ACNA,qD;;;;;;ACAA,yC;;;;;;ACAA,+B;;;;;;ACAA,gC;;;;;;ACAA,iC;;;;;;ACAA,oC;;;;;;ACAA,2C","file":"models.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 27);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 55752f532ee5ec7e1268","import errors from '../../errors'\nimport { validate, getSchema } from '../../validator'\nimport { camelCase2underlineCase, underlineCase2camelCase, generateListParamsSqlString } from '../../utilities'\n\nconst ERRORS = {\n\tInvalidId: 400,\n\tDBCreateFailed: 400,\n\tDBUpdateFailed: 400,\n\tDBDeleteFailed: 400,\n\tDBGetFailed: 400,\n}\nerrors.register(ERRORS)\n\nexport class DataModel {\n\tconstructor(scheme, table) {\n\t\tthis.scheme = scheme\n\t\tthis.table = table\n\t\tthis.independentId = true\n\t\tthis.returnCreateTime = true\n\t\tthis.returnLastUpdateTime = true\n\t\tthis.pkey = 'id'\n\t\tthis.props = {}\n\t}\n\n\tasync isExist(pkey) {\n\t\tconst query = `SELECT * FROM \"${this.scheme}\".${this.table} WHERE ${this.pkey} = $1;`\n\t\tconst result = await db.query(query, [pkey])\n\t\tif (result.rowCount <= 0) { return false }\n\t\treturn true\n\t}\n\n\tasync isExistByKey(key, value) {\n\t\tconst query = `SELECT * FROM \"${this.scheme}\".${this.table} WHERE ${camelCase2underlineCase(key)} = $1;`\n\t\tconst result = await db.query(query, [value])\n\t\tif (result.rowCount <= 0) { return false }\n\t\treturn true\n\t}\n\n\tcopy() {\n\t\tconst copy = Object.assign({}, this)\n\t\tObject.setPrototypeOf(copy, Object.getPrototypeOf(this))\n\t\treturn copy\n\t}\n\n\tasync create(client = null) {\n\t\tif (this.independentId === true) {\n\t\t\tif (this.props[this.pkey] !== null || this.props[this.pkey] !== undefined) delete this.props[this.pkey]\n\t\t}\n\t\tconst propNames = Object.keys(this.props).map(prop => camelCase2underlineCase(prop)).join(',')\n\t\tconst propNumbers = Object.keys(this.props).map((prop, index) => `$${index + 1}`).join(',')\n\t\tconst params = Object.keys(this.props).map(prop => this.props[prop])\n\t\tconst query = `\n\t\t\tINSERT INTO \"${this.scheme}\".${this.table} (\n\t\t\t\t${propNames}\n\t\t\t) VALUES (\n\t\t\t\t${propNumbers}\n\t\t\t) RETURNING ${this.pkey}\n\t\t;`\n\t\tlet result\n\t\tif (client) {\n\t\t\tresult = await client.query(query, params)\n\t\t} else {\n\t\t\tresult = await db.query(query, params)\n\t\t}\n\n\t\tif (result.rowCount <= 0) throw new errors.DBCreateFailedError()\n\t\tconst row = result.rows[0]\n\t\tthis.props[this.pkey] = row[this.pkey]\n\t}\n\n\tasync update(client = null) {\n\t\tconst { pkey } = this\n\t\tconst propAssigns = Object.keys(this.props).filter(key => key !== pkey).map((prop, index) => `${camelCase2underlineCase(prop)}=$${index + 2}`)\n\t\tpropAssigns.push('last_update_time = unix_now()')\n\t\tconst str = propAssigns.join(',')\n\t\tconst params = Object.keys(this.props).map(prop => this.props[prop])\n\t\tconst query = `\n\t\t\tUPDATE \"${this.scheme}\".${this.table}\n\t\t\tSET ${str}\n\t\t\tWHERE ${this.pkey} = $1\n\t\t;`\n\t\tlet result\n\t\tif (client) {\n\t\t\tresult = await client.query(query, params)\n\t\t} else {\n\t\t\tresult = await db.query(query, params)\n\t\t}\n\t\tif (result.rowCount <= 0) throw new errors.DBUpdateFailedError()\n\t}\n\n\tasync get(pkey) {\n\t\tconst obj = {}\n\t\tobj[this.pkey] = pkey\n\t\tvalidate(obj, getSchema(this.schema, this.pkey))\n\t\tconst query = `SELECT * FROM \"${this.scheme}\".${this.table} WHERE ${this.pkey} = $1;`\n\t\tconst result = await db.query(query, [pkey])\n\t\tif (result.rowCount <= 0) throw new errors.DBGetFailedError()\n\t\tconst row = result.rows[0]\n\t\tconst res = {}\n\t\tObject.keys(this.schema).forEach(prop => {\n\t\t\tres[prop] = row[camelCase2underlineCase(prop)]\n\t\t})\n\t\tif (this.returnCreateTime) {\n\t\t\tres.createTime = row.create_time\n\t\t}\n\t\tif (this.returnLastUpdateTime) {\n\t\t\tres.lastUpdateTime = row.last_update_time\n\t\t}\n\t\treturn res\n\t}\n\n\tasync getByKey(key, value) {\n\t\tconst query = `SELECT * FROM \"${this.scheme}\".${this.table} WHERE ${key} = $1;`\n\t\tconst result = await db.query(query, [value])\n\t\tif (result.rowCount <= 0) throw new errors.DBGetFailedError()\n\t\tconst row = result.rows[0]\n\t\tconst res = {}\n\t\tObject.keys(this.schema).forEach(prop => {\n\t\t\tres[prop] = row[camelCase2underlineCase(prop)]\n\t\t})\n\t\tif (this.returnCreateTime) {\n\t\t\tres.createTime = row.create_time\n\t\t}\n\t\tif (this.returnLastUpdateTime) {\n\t\t\tres.lastUpdateTime = row.last_update_time\n\t\t}\n\t\treturn res\n\t}\n\n\tasync getList(params, values) {\n\t\tconst paramsString = generateListParamsSqlString(this.pkey, params)\n\t\tconst query = `SELECT * from \"${this.scheme}\".${this.table} ${paramsString};`\n\t\tconst queryParams = values || []\n\t\tconst result = await db.query(query, queryParams)\n\t\treturn result.rows.map(row => {\n\t\t\tconst data = {}\n\t\t\tObject.keys(this.schema).forEach(prop => {\n\t\t\t\tdata[prop] = row[camelCase2underlineCase(prop)]\n\t\t\t})\n\t\t\tif (this.returnCreateTime) {\n\t\t\t\tdata.createTime = row.create_time\n\t\t\t}\n\t\t\tif (this.returnLastUpdateTime) {\n\t\t\t\tdata.lastUpdateTime = row.last_update_time\n\t\t\t}\n\t\t\treturn data\n\t\t})\n\t}\n\n\tasync getViewListCount(view, pkey, params, values) {\n\t\tconst paramsString = generateListParamsSqlString(pkey, params, true)\n\t\tconst query = `SELECT COUNT(*) as total from \"${this.scheme}\".${view} ${paramsString};`\n\t\tconst queryParams = values || []\n\t\tconst result = await db.query(query, queryParams)\n\t\treturn result.rows[0].total\n\t}\n\n\tasync getListCount(params, values) {\n\t\treturn await this.getViewListCount(this.table, this.pkey, params, values)\n\t}\n\n\tasync getViewList(view, pkey, params, values) {\n\t\tconst paramsString = generateListParamsSqlString(pkey, params)\n\t\tconst query = `SELECT * from \"${this.scheme}\".${view} ${paramsString};`\n\t\tconst queryParams = values || []\n\t\tconst result = await db.query(query, queryParams)\n\t\treturn result.rows.map(row => {\n\t\t\tconst data = {}\n\t\t\tresult.fields.forEach(filed => {\n\t\t\t\tconst name = filed.name\n\t\t\t\tdata[underlineCase2camelCase(name)] = row[name]\n\t\t\t})\n\t\t\treturn data\n\t\t})\n\t}\n\n\tasync save(client = null) {\n\t\tconst pkey = this.pkey\n\t\tvalidate(this.props, getSchema(this.schema, Object.keys(this.props)))\n\t\ttry {\n\t\t\tif (this.props[pkey]) {\n\t\t\t\tconst isExist = await this.isExist(this.props[pkey])\n\t\t\t\tif (!isExist) {\n\t\t\t\t\tawait this.create(client)\n\t\t\t\t} else {\n\t\t\t\t\tconst object = await this.get(this.props[pkey])\n\t\t\t\t\tObject.keys(this.schema).forEach(key => {\n\t\t\t\t\t\tif (key !== pkey) {\n\t\t\t\t\t\t\tthis.props[key] = ((this.props[key] !== null && this.props[key] !== undefined) ? this.props[key] : object[key])\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tawait this.update(client)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tawait this.create(client)\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tthrow err\n\t\t}\n\t\treturn this.copy()\n\t}\n\n\tasync delete(pkey, client = null) {\n\t\tconst obj = {}\n\t\tobj[this.pkey] = pkey\n\t\tvalidate(obj, getSchema(this.schema, this.pkey))\n\t\ttry {\n\t\t\tif (pkey) {\n\t\t\t\tlet isExist = await this.isExist(pkey)\n\t\t\t\tif (!isExist) {\n\t\t\t\t\tthrow new errors.InvalidIdError()\n\t\t\t\t} else {\n\t\t\t\t\tconst query = `DELETE FROM \"${this.scheme}\".${this.table} WHERE ${this.pkey} = $1;`\n\t\t\t\t\tif (client) {\n\t\t\t\t\t\tawait client.query(query, [pkey])\n\t\t\t\t\t} else {\n\t\t\t\t\t\tawait db.query(query, [pkey])\n\t\t\t\t\t}\n\t\t\t\t\tisExist = await this.isExist(pkey)\n\t\t\t\t\tif (isExist) throw new errors.DBDeleteFailedError()\n\t\t\t\t}\n\t\t\t} else throw new errors.InvalidIdError()\n\t\t} catch (err) {\n\t\t\tthrow err\n\t\t}\n\t}\n\n\tstatic async transaction(actions) {\n\t\tawait db.transaction(actions)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./models/general/du.js","import Joi from 'joi'\nimport errors from '../errors'\n\nconst ERRORS = {\n\tValidationFailed: {\n\t\tstatusCode: 400,\n\t},\n}\nerrors.register(ERRORS)\n\nfunction validate(data, schema, ext) {\n\tif (typeof(schema) === 'object') {\n\t\t/* eslint-disable no-param-reassign */\n\t\tschema = Joi.object(schema)\n\t}\n\tif (ext) {\n\t\tif (Array.isArray(ext)) {\n\t\t\tconst required = {}\n\t\t\tfor (const r of ext) {\n\t\t\t\trequired[r] = Joi.required()\n\t\t\t}\n\t\t\text = Joi.object(required)\n\t\t} else if (typeof(ext) === 'object') {\n\t\t\text = Joi.object(ext)\n\t\t}\n\t\tschema = schema.concat(ext)\n\t}\n\tconst result = Joi.validate(data, schema)\n\tif (result.error) {\n\t\tthrow new errors.ValidationFailedError(result.error.details[0])\n\t}\n\treturn result.value\n}\n\nfunction getSchema(schema, ...keys) {\n\tconst schemaKeys = []\n\tfor (const key of keys) {\n\t\tif (Array.isArray(key)) {\n\t\t\tschemaKeys.push(...key)\n\t\t} else {\n\t\t\tschemaKeys.push(key)\n\t\t}\n\t}\n\tconst sub = {}\n\tfor (const key of schemaKeys) {\n\t\tsub[key] = schema[key]\n\t}\n\treturn sub\n}\n\nexport {\n\tvalidate,\n\tgetSchema,\n\tJoi,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./validator/index.js","import errors from 'restify-errors'\n\nfunction normalize(name) {\n\t/* eslint-disable no-param-reassign */\n\t// name = name.charAt(0).toUpperCase() + name.slice(1)\n\tif (!name.endsWith('Error')) {\n\t\treturn `${name}Error`\n\t}\n\treturn name\n}\n\nerrors.localization = require('./locale.zh-cn.json')\n\nerrors.lang = (error) => {\n\tif (error.message) return error.message\n\tconst name = error.name.slice(0, -5)\n\treturn errors.localization[name]\n}\n\nerrors.register = (options) => {\n\tObject.keys(options).forEach(name => {\n\t\tconst config = options[name]\n\t\tconst errorName = normalize(name)\n\t\tswitch (typeof config) {\n\t\tcase 'number':\n\t\t\terrors.makeConstructor(errorName, {\n\t\t\t\tstatusCode: config,\n\t\t\t})\n\t\t\treturn\n\t\tcase 'object':\n\t\t\terrors.makeConstructor(errorName, config)\n\t\t\treturn\n\t\tdefault:\n\t\t}\n\t\tthrow new Error(`Invalid error config for ${errorName}`)\n\t})\n}\n\nexport default errors\n\n\n\n// WEBPACK FOOTER //\n// ./errors/index.js","import 'regenerator-runtime/runtime'\nimport * as models from './models'\nimport db from './db'\n\nglobal.db = db\n\nexport default models\n\nexport errors from './errors'\n\nexport const configure = async (options) => {\n\tglobal.hashSalt = options.secret.hash\n\tconst res = await db.configure(options.database)\n\treturn res\n}\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","\"use strict\";\n\nrequire(\"core-js/shim\");\n\nrequire(\"regenerator-runtime/runtime\");\n\nrequire(\"core-js/fn/regexp/escape\");\n\nif (global._babelPolyfill) {\n  throw new Error(\"only one instance of babel-polyfill is allowed\");\n}\nglobal._babelPolyfill = true;\n\nvar DEFINE_PROPERTY = \"defineProperty\";\nfunction define(O, key, value) {\n  O[key] || Object[DEFINE_PROPERTY](O, key, {\n    writable: true,\n    configurable: true,\n    value: value\n  });\n}\n\ndefine(String.prototype, \"padLeft\", \"\".padStart);\ndefine(String.prototype, \"padRight\", \"\".padEnd);\n\n\"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill\".split(\",\").forEach(function (key) {\n  [][key] && define(Array, key, Function.call.bind([][key]));\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/babel-polyfill/lib/index.js\n// module id = 4\n// module chunks = 0","const connections = {\n\tpostgres: {},\n\tredis: {},\n}\n\nfunction init(type, name, options) {\n\tif (name === 'default') {\n\t\tthrow new Error('databse name \"default\" is reserved.')\n\t}\n\tconst arr = [type === 'postgres' ? 'postgresql' : type, '://']\n\tconst credentials = options.credentials\n\tif (credentials) {\n\t\tif (credentials.username) {\n\t\t\tarr.push(options.credentials.username)\n\t\t} else if (type === 'postgres') {\n\t\t\tthrow new Error('Missing username in postgres credentials')\n\t\t}\n\t\tif (credentials.password) {\n\t\t\tarr.push(':')\n\t\t\tarr.push(options.credentials.password)\n\t\t}\n\t\tarr.push('@')\n\t}\n\tarr.push(options.host)\n\tif (options.port) {\n\t\tarr.push(':')\n\t\tarr.push(options.port)\n\t}\n\tconst server = arr.join('')\n\tarr.push('/')\n\tarr.push(options.db)\n\tconst connection = {\n\t\tserver,\n\t\tdb: options.db,\n\t\tdatabase: options.db,\n\t\tstring: arr.join(''),\n\t\thost: options.host,\n\t\tport: options.port,\n\t\toptions: options.options,\n\t\tdefault: options.default,\n\t}\n\tif (credentials) {\n\t\tif (credentials.username) {\n\t\t\tconnection.user = credentials.username\n\t\t}\n\t\tif (credentials.password) {\n\t\t\tconnection.password = credentials.password\n\t\t}\n\t}\n\tconnections[type][name] = connection\n\tif (connection.default) {\n\t\tconnections[type].default = connection\n\t}\n}\n\nfunction configure(config) {\n\tfor (const type in config) {\n\t\tconst typedConfig = config[type]\n\t\tfor (const name in typedConfig) {\n\t\t\tconst options = typedConfig[name]\n\t\t\toptions.default = options.default || Object.keys(typedConfig).length === 1\n\t\t\tinit(type, name, options)\n\t\t}\n\t}\n}\n\nexport default {\n\tconfigure,\n\tpostgres: connections.postgres,\n\tredis: connections.redis,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./db/connections.js","import pgAsPromised from 'pg-then'\nimport connections from './connections'\nimport { DbManager } from './manager'\n\nconst slice = [].slice\n\n// configure pg\npgAsPromised.pg.defaults.parseInt8 = true\n\nfunction configure(options) {\n\tconnections.configure(options)\n\treturn new DbManager({ connections })\n}\n\nasync function query() {\n\tlet args = slice.call(arguments)\n\tlet connection = null\n\tconst database = args[0]\n\tif (connections.postgres.hasOwnProperty(database)) {\n\t\tconnection = connections.postgres[database]\n\t\tif (!connection) {\n\t\t\tthrow new Error(`Connection[${database}] isn't existed`)\n\t\t}\n\t\targs = slice.call(arguments, 1)\n\t} else {\n\t\tconnection = connections.postgres.default\n\t\tif (!connection) {\n\t\t\tthrow new Error('Connection.default does not existed')\n\t\t}\n\t}\n\tlet client = null\n\ttry {\n\t\tclient = pgAsPromised.Client(connection)\n\t\treturn await client.query.apply(client, args)\n\t} catch (err) {\n\t\tthrow err\n\t} finally {\n\t\tif (client) client.end()\n\t}\n}\n\nasync function transaction(database, actions) {\n\tlet connection = null\n\tif (typeof(database) === 'function') {\n\t\tactions = database\n\t\tconnection = connections.postgres.default\n\t} else {\n\t\tconnection = connections.postgres[database]\n\t}\n\tlet client = null\n\ttry {\n\t\tclient = pgAsPromised.Client(connection)\n\t\tawait client.query('BEGIN')\n\t\tconst result = await actions(client)\n\t\tawait client.query('COMMIT')\n\t\treturn result\n\t} catch (err) {\n\t\tawait client.query('ROLLBACK')\n\t\tthrow err\n\t} finally {\n\t\tif (client) client.end()\n\t}\n}\n\nexport default {\n\tconfigure,\n\tquery,\n\ttransaction,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./db/index.js","import fs from 'fs'\nimport path from 'path'\n\nexport class DbManager {\n\tconstructor(data) {\n\t\tthis.connections = data.connections\n\t\tthis.version = data.version\n\t}\n\n\tasync dropDbIfExists() {\n\t\tconst dbname = this.connections.postgres.default.db\n\t\tconst queryTerminate = `\n\t\t\tSELECT pg_terminate_backend(pg_stat_activity.pid)\n\t\t\tFROM pg_stat_activity\n\t\t\tWHERE pg_stat_activity.datname = $1\n\t\t\t;`\n\t\t/* eslint-disable no-undef */\n\t\tawait db.query('postgres', queryTerminate, [dbname])\n\t\tconst queryDrop = `DROP DATABASE IF EXISTS \"${dbname}\";`\n\t\tawait db.query('postgres', queryDrop)\n\t}\n\n\tasync createDbIfNotExists() {\n\t\tif (!this.connections.postgres.postgres) return // Can't create database\n\t\tconst dbname = this.connections.postgres.default.db\n\t\tconst queryCheck = `\n\t\t\tSELECT 1 AS exists\n\t\t\tFROM pg_database\n\t\t\tWHERE datname = $1\n\t\t\t`\n\t\tconst result = await db.query('postgres', queryCheck, [dbname])\n\t\tif (result.rowCount === 0) {\n\t\t\tconst queryCreate = `CREATE DATABASE \"${dbname}\"`\n\t\t\tawait db.query('postgres', queryCreate)\n\t\t}\n\t}\n\n\tasync getCurrentVersion() {\n\t\tconst queryCheck = `\n\t\t\tSELECT 1 AS exists FROM pg_class WHERE relname = 'version';\n\t\t`\n\t\tconst resultCheck = await db.query(queryCheck)\n\t\tif (resultCheck.rowCount === 0) {\n\t\t\treturn -1\n\t\t}\n\t\tconst queryGetVersion = 'SELECT ver FROM version ORDER BY ver DESC LIMIT 1;'\n\t\tconst resultVersion = await db.query(queryGetVersion)\n\t\tif (resultVersion.rowCount === 0) {\n\t\t\treturn -1\n\t\t}\n\t\tconst currentVer = resultVersion.rows[0].ver\n\t\tthis.version = currentVer\n\t\treturn currentVer\n\t}\n\n\tasync getPatchFolders() {\n\t\tconst patchMainPath = path.join(__dirname, 'patches')\n\t\tconst currentVer = await this.getCurrentVersion()\n\t\tconst clusters = fs.readdirSync(patchMainPath)\n\t\tconst patchFolders = []\n\t\tfor (const c of clusters) {\n\t\t\tif (c.charAt(0) === '.') continue\n\t\t\tconst folders = fs.readdirSync(path.join(patchMainPath, c))\n\t\t\tfor (const f of folders) {\n\t\t\t\tif (f.charAt(0) === '.') continue\n\t\t\t\tconst ver = Number.parseFloat(f)\n\t\t\t\tif (ver > currentVer) {\n\t\t\t\t\tpatchFolders.push([ver, path.join(patchMainPath, c, f)])\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tpatchFolders.sort((a, b) => {\n\t\t\treturn a[0] - b[0]\n\t\t})\n\t\treturn patchFolders\n\t}\n\n\tasync updateVersion(client, patchVer) {\n\t\tconst currentVer = await this.getCurrentVersion()\n\t\tif (patchVer <= currentVer) return\n\t\tconst query = 'INSERT INTO version (ver) VALUES ($1);'\n\t\tawait client.query(query, [patchVer])\n\t\tthis.version = patchVer\n\t}\n\n\tasync update() {\n\t\tawait this.createDbIfNotExists()\n\t\tconst patchFolders = await this.getPatchFolders()\n\t\tawait db.transaction(async (client) => {\n\t\t\tfor (const patchFolder of patchFolders) {\n\t\t\t\tconst patchVer = patchFolder[0]\n\t\t\t\tconst patchPath = patchFolder[1]\n\t\t\t\tconst ver = await this.getCurrentVersion()\n\t\t\t\tif (patchVer <= ver) continue\n\t\t\t\tconst files = fs.readdirSync(patchPath)\n\t\t\t\tif (files.includes('update.js')) {\n\t\t\t\t\tconst updatorPath = '.' + path.join(patchPath, 'update.js').slice(__dirname.length)\n\t\t\t\t\tconst updator = require(updatorPath)\n\t\t\t\t\tawait updator.putPatch(client)\n\t\t\t\t} else if (files.includes('query.sql')) {\n\t\t\t\t\tconst query = fs.readFileSync(path.join(patchPath, 'query.sql'), 'utf8')\n\t\t\t\t\tawait client.query(query)\n\t\t\t\t} else {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tawait this.updateVersion(client, patchVer)\n\t\t\t}\n\t\t})\n\t}\n\n\tasync rebuild() {\n\t\tawait this.dropDbIfExists()\n\t\tawait this.update()\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./db/manager.js","import { Joi as T } from '../../validator'\nimport { DataModel } from '../general/du'\n\nexport class Document extends DataModel {\n\tconstructor(data) {\n\t\tsuper('document', 'document')\n\t\tif (data) {\n\t\t\tif (data.id !== undefined) this.props.id = data.id\n\t\t\tif (data.type !== undefined) this.props.type = data.type\n\t\t\tif (data.url !== undefined) this.props.url = data.url\n\t\t\tif (data.thumbUrl !== undefined) this.props.thumbUrl = data.thumbUrl\n\t\t\tif (data.name !== undefined) this.props.name = data.name\n\t\t\tif (data.category !== undefined) this.props.category = data.category\n\t\t\tif (data.content !== undefined) this.props.content = data.content\n\t\t\tif (data.size !== undefined) this.props.size = data.size\n\t\t}\n\t\tthis.schema = {\n\t\t\t/* eslint-disable newline-per-chained-call */\n\t\t\tid: T.number().integer().allow(null),\n\t\t\ttype: T.number().integer().min(0).max(10),\n\t\t\turl: T.string().allow('', null),\n\t\t\tthumbUrl: T.string().allow('', null),\n\t\t\tname: T.string().allow('', null),\n\t\t\tcategory: T.number().integer().allow(null),\n\t\t\tcontent: T.string().allow('', null),\n\t\t\tsize: T.number().integer().allow(null),\n\t\t}\n\t}\n\n\tstatic Type = { Unknown: 1, Image: 2, Pdf: 3, Audio: 4 }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./models/document/document.js","import { Joi as T } from '../../validator'\nimport { DataModel } from '../general/du'\n\nexport class DocumentHistory extends DataModel {\n\tconstructor(data) {\n\t\tsuper('document', 'document_history')\n\t\tif (data) {\n\t\t\tif (data.id !== undefined) this.props.id = data.id\n\t\t\tif (data.documentId !== undefined) this.props.documentId = data.documentId\n\t\t}\n\t\tthis.schema = {\n\t\t\t/* eslint-disable newline-per-chained-call */\n\t\t\tid: T.number().integer().allow(null),\n\t\t\tdocumentId: T.number().integer().allow(null),\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./models/document/documentHistory.js","import { Joi as T } from '../../validator'\nimport { DataModel } from '../general/du'\n\nexport class DocumentTag extends DataModel {\n\tconstructor(data) {\n\t\tsuper('document', 'document_tag')\n\t\tif (data) {\n\t\t\tif (data.id !== undefined) this.props.id = data.id\n\t\t\tif (data.documentId !== undefined) this.props.documentId = data.documentId\n\t\t\tif (data.tagId !== undefined) this.props.tagId = data.tagId\n\t\t}\n\t\tthis.schema = {\n\t\t\t/* eslint-disable newline-per-chained-call */\n\t\t\tid: T.number().integer().allow(null),\n\t\t\tdocumentId: T.number().integer().allow(null),\n\t\t\ttagId: T.number().integer().allow(null),\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./models/document/documentTag.js","export * from './document'\nexport * from './tag'\nexport * from './documentTag'\nexport * from './documentHistory'\n\n\n\n// WEBPACK FOOTER //\n// ./models/document/index.js","import { Joi as T } from '../../validator'\nimport { DataModel } from '../general/du'\n\nexport class Tag extends DataModel {\n\tconstructor(data) {\n\t\tsuper('document', 'tag')\n\t\tif (data) {\n\t\t\tif (data.id !== undefined) this.props.id = data.id\n\t\t\tif (data.name !== undefined) this.props.name = data.name\n\t\t\tif (data.description !== undefined) this.props.description = data.description\n\t\t}\n\t\tthis.schema = {\n\t\t\t/* eslint-disable newline-per-chained-call */\n\t\t\tid: T.number().integer().allow(null),\n\t\t\tname: T.string().allow('', null),\n\t\t\tdescription: T.string().allow('', null),\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./models/document/tag.js","export * from './du'\n\n\n\n// WEBPACK FOOTER //\n// ./models/general/index.js","export * from './document'\nexport * from './general'\n\n\n\n// WEBPACK FOOTER //\n// ./models/index.js","\nconst iterateKeysObj = (obj, keyFunc) => {\n\tif (!(obj instanceof Object)) return obj\n\n\tif (obj instanceof Array) {\n\t\treturn obj.reduce((newArray, item) => {\n\t\t\tnewArray.push(iterateKeysObj(item, keyFunc))\n\t\t\treturn newArray\n\t\t}, [])\n\t}\n\n\treturn Object.keys(obj).reduce((newObj, key) => {\n\t\tconst newKey = keyFunc(key)\n\t\tnewObj[newKey] = iterateKeysObj(obj[key], keyFunc)\n\t\treturn newObj\n\t}, {})\n}\n\nconst iterateKeys = (obj, keyFunc) => {\n\tif (typeof(obj) === 'string') return keyFunc(obj)\n\treturn iterateKeysObj(obj, keyFunc)\n}\n\n\nexport const getTime = () => {\n\tconst tick = new Date().getTime()\n\treturn tick\n}\n\nexport const getEpochTime = () => {\n\tconst date = new Date()\n\treturn date.setHours(0, 0, 0, 0)\n}\n\nexport const getAddedMonthTime = (timestamp, addedMonth = 1) => {\n\tconst originDate = new Date(timestamp)\n\tconst date = new Date(timestamp)\n\tconst month = date.getMonth()\n\tdate.setMonth(month + addedMonth)\n\tif ((originDate.getMonth() + addedMonth) % 12 === date.getMonth()) {\n\t\treturn date.getTime()\n\t}\n\toriginDate.setMonth(month + addedMonth + 1, 0)\n\treturn originDate.getTime()\n}\n\nexport const underlineCase2camelCase = (obj) =>\n\titerateKeys(obj, (key) => {\n\t\tlet newKey = ''\n\t\tlet toUpperCase = false\n\t\tfor (let i = 0; i < key.length; i++) {\n\t\t\tif (key[i] === '_') {\n\t\t\t\ttoUpperCase = true\n\t\t\t} else {\n\t\t\t\tnewKey += toUpperCase ? key[i].toUpperCase() : key[i]\n\t\t\t\ttoUpperCase = false\n\t\t\t}\n\t\t}\n\t\treturn newKey\n\t})\n\nexport const camelCase2underlineCase = (obj) =>\n\titerateKeys(obj, (key) => {\n\t\tlet newKey = ''\n\t\tfor (let i = 0; i < key.length; i++) {\n\t\t\tif (key[i] <= 'Z' && key[i] >= 'A') {\n\t\t\t\tif (newKey) newKey += '_'\n\t\t\t\tnewKey += `${key[i].toLowerCase()}`\n\t\t\t} else {\n\t\t\t\tnewKey += key[i]\n\t\t\t}\n\t\t}\n\t\treturn newKey\n\t})\n\n// params: {orderBy, pageSize, next, page, filters}\nexport const generateListParamsSqlString = (primaryName, params, isSum = false) => {\n\tif (!params) return ''\n\tconst primary = camelCase2underlineCase(primaryName)\n\tlet orderBy = params.orderBy ? `ORDER BY ${camelCase2underlineCase(params.orderBy)}` : `ORDER BY ${primary} DESC`\n\tlet limit = ''\n\tconst filters = []\n\tif (params.page || params.page === 0) {\n\t\tconst pageSize = params.pageSize || 10\n\t\tlimit = `LIMIT ${pageSize} OFFSET ${params.page * pageSize}`\n\t} else if (params.next || params.next === 0) {\n\t\torderBy = `ORDER BY ${primary} DESC`\n\t\tconst pageSize = params.pageSize || 10\n\t\tlimit = `LIMIT ${pageSize}`\n\t\tif (isSum !== true) {\n\t\t\tfilters.push(`${primary} < ${params.next}`)\n\t\t}\n\t} else if (params.pageSize) {\n\t\tlimit = `LIMIT ${params.pageSize}`\n\t}\n\tif (params.filters && params.filters.length > 0) {\n\t\tparams.filters.forEach(filter => {\n\t\t\tconst strings = filter.split(/=|LIKE|>|<|>=|<=|@>|<@|<>/)\n\t\t\tconst key = strings[0]\n\t\t\tconst f = `${camelCase2underlineCase(key)}${filter.substr(key.length, filter.length - key.length)}`\n\t\t\tfilters.push(f)\n\t\t})\n\t}\n\n\tif (isSum) {\n\t\torderBy = ''\n\t\tlimit = ''\n\t}\n\n\tconst filterString = filters.length > 0 ? `WHERE ${filters.join(' AND ')}` : ''\n\tconst ret = ` ${filterString} ${orderBy} ${limit}`\n\t// console.log(filterString)\n\treturn ret\n}\n\nexport const checkObject = (object, data) => {\n\tObject.keys(data).forEach(p => {\n\t\tif (p !== 'id' && data[p] !== undefined && data[p] !== null) object[p].should.equal(data[p])\n\t})\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utilities/index.js","/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    if (typeof global.process === \"object\" && global.process.domain) {\n      invoke = global.process.domain.bind(invoke);\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // Among the various tricks for obtaining a reference to the global\n  // object, this seems to be the most reliable technique that does not\n  // use indirect eval (which violates Content Security Policy).\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/babel-polyfill/~/regenerator-runtime/runtime.js\n// module id = 16\n// module chunks = 0","module.exports = {\"ValidationFailed\":\"\",\"AccountOrPasswordInvalid\":\"\",\"InvalidId\":\"id\",\"DBCreateFailed\":\"\",\"DBUpdateFailed\":\"\",\"DBDeleteFailed\":\"\",\"DBGetFailed\":\"\",\"InvalidUserId\":\"\",\"CheckVerifyCodeFailed\":\"\",\"InvalidVerifyCode\":\"\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./errors/locale.zh-cn.json\n// module id = 17\n// module chunks = 0","/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var hasOwn = Object.prototype.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided, then outerFn.prototype instanceof Generator.\n    var generator = Object.create((outerFn || Generator).prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype;\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `value instanceof AwaitArgument` to determine if the yielded value is\n  // meant to be awaited. Some may consider the name of this method too\n  // cutesy, but they are curmudgeons.\n  runtime.awrap = function(arg) {\n    return new AwaitArgument(arg);\n  };\n\n  function AwaitArgument(arg) {\n    this.arg = arg;\n  }\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value instanceof AwaitArgument) {\n          return Promise.resolve(value.arg).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    if (typeof process === \"object\" && process.domain) {\n      invoke = process.domain.bind(invoke);\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          if (method === \"return\" ||\n              (method === \"throw\" && delegate.iterator[method] === undefined)) {\n            // A return or throw (when the delegate iterator has no throw\n            // method) always terminates the yield* loop.\n            context.delegate = null;\n\n            // If the delegate iterator has a return method, give it a\n            // chance to clean up.\n            var returnMethod = delegate.iterator[\"return\"];\n            if (returnMethod) {\n              var record = tryCatch(returnMethod, delegate.iterator, arg);\n              if (record.type === \"throw\") {\n                // If the return method threw an exception, let that\n                // exception prevail over the original return or throw.\n                method = \"throw\";\n                arg = record.arg;\n                continue;\n              }\n            }\n\n            if (method === \"return\") {\n              // Continue with the outer return, now that the delegate\n              // iterator has been terminated.\n              continue;\n            }\n          }\n\n          var record = tryCatch(\n            delegate.iterator[method],\n            delegate.iterator,\n            arg\n          );\n\n          if (record.type === \"throw\") {\n            context.delegate = null;\n\n            // Like returning generator.throw(uncaught), but without the\n            // overhead of an extra function call.\n            method = \"throw\";\n            arg = record.arg;\n            continue;\n          }\n\n          // Delegate generator ran and handled its own exceptions so\n          // regardless of what the method was, we continue as if it is\n          // \"next\" with an undefined arg.\n          method = \"next\";\n          arg = undefined;\n\n          var info = record.arg;\n          if (info.done) {\n            context[delegate.resultName] = info.value;\n            context.next = delegate.nextLoc;\n          } else {\n            state = GenStateSuspendedYield;\n            return info;\n          }\n\n          context.delegate = null;\n        }\n\n        if (method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = arg;\n\n        } else if (method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw arg;\n          }\n\n          if (context.dispatchException(arg)) {\n            // If the dispatched exception was caught by a catch block,\n            // then let that catch block handle the exception normally.\n            method = \"next\";\n            arg = undefined;\n          }\n\n        } else if (method === \"return\") {\n          context.abrupt(\"return\", arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          var info = {\n            value: record.arg,\n            done: context.done\n          };\n\n          if (record.arg === ContinueSentinel) {\n            if (context.delegate && method === \"next\") {\n              // Deliberately forget the last sent value so that we don't\n              // accidentally pass it on to the delegate.\n              arg = undefined;\n            }\n          } else {\n            return info;\n          }\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(arg) call above.\n          method = \"throw\";\n          arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.next = finallyEntry.finallyLoc;\n      } else {\n        this.complete(record);\n      }\n\n      return ContinueSentinel;\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = record.arg;\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // Among the various tricks for obtaining a reference to the global\n  // object, this seems to be the most reliable technique that does not\n  // use indirect eval (which violates Content Security Policy).\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/regenerator-runtime/runtime.js\n// module id = 18\n// module chunks = 0","function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 19;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./db\n// module id = 19\n// module chunks = 0","module.exports = require(\"core-js/fn/regexp/escape\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"core-js/fn/regexp/escape\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"core-js/shim\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"core-js/shim\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"joi\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"joi\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"pg-then\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pg-then\"\n// module id = 25\n// module chunks = 0","module.exports = require(\"restify-errors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"restify-errors\"\n// module id = 26\n// module chunks = 0"],"sourceRoot":""}